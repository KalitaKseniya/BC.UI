<div *ngIf="user; else loading_block">
  <!-- <p *ngIf="error" class="watning">{{error}}</p> -->
  <form class="card" [formGroup]="form" (ngSubmit)="mySubmit()">
    <div class="header">
      <button routerLink="/admin/users" class="btn  btn-left">
        Back to all users
      </button>
      <h2>Change password</h2>
    </div>
    <div class="form-control">
      <label>Email</label>
      <input
        class="form-control"
        type="text"
        formControlName="email"
        [disabled]="true"
        readonly
      />
    </div>
    <div class="form-control">
      <label>Username</label>
      <input 
        type="text" 
        formControlName="username" 
        [disabled]="true" 
        readonly 
      />
    </div>
    <div class="form-control">
      <label>Old Password</label>
      <input class="form-control" type="text" formControlName="oldPassword" />
      <div
        class="validation"
        *ngIf="
          form.get('oldPassword').touched && form.get('oldPassword').invalid
        "
      >
        <small *ngIf="form.get('oldPassword').errors.required"
          >Old password is a required field</small
        >
      </div>
    </div>
    <div class="form-control">
      <label>New password</label>
      <input class="form-control" type="text" formControlName="newPassword" />
      <div
        class="validation"
        *ngIf="
          form.get('newPassword').touched && form.get('newPassword').invalid
        "
      >
        <small *ngIf="form.get('newPassword').errors.required"
          >New password is a required field</small
        >
        <small *ngIf="form.get('newPassword').errors.pattern"
        >Password must contain an uppercase character, lowercase character, a digit, and a non-alphanumeric character.</small
            >
        <small *ngIf="form.get('newPassword').errors.minlength"
          >Password length should be greater than or equal to 6.</small
        >
      </div>
    </div>

    <button
      class="btn btn-primary"
      type="submit"
      [disabled]="form.invalid || submitted"
    >
      Change password
    </button>
  </form>
</div>
<ng-template #loading_block> Loading... </ng-template>
